{"version":3,"file":"server.js","mappings":"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","sources":["webpack://basic-react-ssr-template/./configuration/setup/configuration.default.js","webpack://basic-react-ssr-template/./configuration/setup/configuration.development.js","webpack://basic-react-ssr-template/./configuration/setup/configuration.production.js","webpack://basic-react-ssr-template/./configuration/setup/index.js","webpack://basic-react-ssr-template/./src/client/app.jsx","webpack://basic-react-ssr-template/./src/client/components/html.jsx","webpack://basic-react-ssr-template/./src/client/components/noMatch.jsx","webpack://basic-react-ssr-template/./src/client/components/onRouteChange.jsx","webpack://basic-react-ssr-template/./src/client/components/shoes.jsx","webpack://basic-react-ssr-template/./src/client/pages/Category.jsx","webpack://basic-react-ssr-template/./src/client/pages/Counter.jsx","webpack://basic-react-ssr-template/./src/client/pages/Home.jsx","webpack://basic-react-ssr-template/./src/server/middleware/renderView.jsx","webpack://basic-react-ssr-template/./src/shared/redux/actionCreators.js","webpack://basic-react-ssr-template/./src/shared/redux/counterReducer.js","webpack://basic-react-ssr-template/./src/shared/redux/initRedux.js","webpack://basic-react-ssr-template/./src/shared/sharedRoutes.js","webpack://basic-react-ssr-template/external commonjs2 \"express\"","webpack://basic-react-ssr-template/external commonjs2 \"lodash/merge\"","webpack://basic-react-ssr-template/external commonjs2 \"prop-types\"","webpack://basic-react-ssr-template/external commonjs2 \"react\"","webpack://basic-react-ssr-template/external commonjs2 \"react-dom/server\"","webpack://basic-react-ssr-template/external commonjs2 \"react-redux\"","webpack://basic-react-ssr-template/external commonjs2 \"react-router-config\"","webpack://basic-react-ssr-template/external commonjs2 \"react-router-dom\"","webpack://basic-react-ssr-template/external commonjs2 \"redux\"","webpack://basic-react-ssr-template/external commonjs2 \"redux-logger\"","webpack://basic-react-ssr-template/external commonjs2 \"redux-thunk\"","webpack://basic-react-ssr-template/webpack/bootstrap","webpack://basic-react-ssr-template/webpack/runtime/compat get default export","webpack://basic-react-ssr-template/webpack/runtime/define property getters","webpack://basic-react-ssr-template/webpack/runtime/harmony module decorator","webpack://basic-react-ssr-template/webpack/runtime/hasOwnProperty shorthand","webpack://basic-react-ssr-template/webpack/runtime/make namespace object","webpack://basic-react-ssr-template/./src/server/app.js"],"sourcesContent":["module.exports = {\n  publicPath: \"/assets\",\n};\n","module.exports = {\n  webpackDevServer: {\n    port: 3001,\n  },\n  webserver: {\n    port: 3000,\n  },\n};\n","module.exports = {\n  webserver: {\n    port: 3000,\n  },\n};\n","const merge = require(\"lodash/merge\");\n\nconst defaultConfiguration = require(\"./configuration.default\");\n\nconst configuration = merge({}, defaultConfiguration);\n\nmodule.exports = configuration;\n\nmerge(configuration, getConfiguration(process.env.NODE_ENV));\n\n// For services like Amazon Elastic Compute Cloud and Heroku\nif (process.env.PORT) {\n  configuration.webserver.port = process.env.PORT;\n}\n\n// For passing custom configuration via an environment variable.\n// For frameworks like Docker.\n// E.g. `CONFIGURATION=\"{ \\\"key\\\": \\\"value\\\" }\" npm start`.\nif (process.env.CONFIGURATION) {\n  try {\n    merge(configuration, JSON.parse(process.env.CONFIGURATION));\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getConfiguration(env) {\n  switch (env) {\n    case \"production\":\n      return require(\"./configuration.production\");\n    default:\n      return require(\"./configuration.development\");\n  }\n}\n","import React, { useEffect, Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { renderRoutes } from \"react-router-config\";\nimport onRouteChange from \"./components/onRouteChange\";\nimport { connect } from \"react-redux\";\n\nconst App = (props) => {\n  useEffect(() => {\n    console.log(\"app ran in client\");\n  }, []);\n\n  return (\n    <div>\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"/category\">Category</Link>\n          </li>\n          <li>\n            <Link to=\"/counter\">counter</Link>\n          </li>\n        </ul>\n      </nav>\n\n      {renderRoutes(props.route.routes, { history: props.history })}\n    </div>\n  );\n};\n\nexport default connect()(onRouteChange(App));\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst HTML = (props) => {\n  const metatagsArray = [];\n\n  props.metatags.forEach((item, index) => {\n    metatagsArray.push(<meta key={`meta-${index}`} {...item} />);\n  });\n\n  return (\n    <html>\n      <head>\n        <title>{props.title}</title>\n        <meta\n          name=\"viewport\"\n          content=\"width=device-width, initial-scale=1.0\"\n        ></meta>\n        {metatagsArray}\n        {Object.keys(props.assets.chunks().styles).map((key) => {\n          return (\n            <link\n              key={key}\n              rel=\"stylesheet\"\n              href={props.assets.chunks().styles[key]}\n            />\n          );\n        })}\n      </head>\n      <body>\n        <div\n          id=\"react-content\"\n          dangerouslySetInnerHTML={{\n            __html: props.renderedToStringComponents,\n          }}\n        />\n        <script\n          dangerouslySetInnerHTML={{\n            __html: `window.__SERIALIZED_STATE__ = JSON.stringify(${props.serverState})`,\n          }}\n        />\n        {Object.keys(props.assets.chunks().javascript).map((key) => {\n          return (\n            <script\n              key={key}\n              type=\"application/javascript\"\n              src={props.assets.chunks().javascript[key]}\n            />\n          );\n        })}\n      </body>\n    </html>\n  );\n};\n\nHTML.propTypes = {\n  renderedToStringComponents: PropTypes.string,\n};\n\nexport default HTML;\n","import React from \"react\";\n\nexport default function NoMatch() {\n  return <div>Four Oh Four</div>;\n}\n","import React from \"react\";\nimport { matchRoutes } from \"react-router-config\";\n\nconst onRouteChange = (WrappedComponent) => {\n  return class extends React.PureComponent {\n    trackPageView() {\n      // In real life you would hook this up to your analytics tool of choice\n      console.log(\"Tracked a pageview\");\n    }\n\n    fetchData(nextProps) {\n      const { route, location } = nextProps;\n      const { routes } = route;\n      const matches = matchRoutes(routes, location.pathname);\n      const results = matches.map(({ match, route }) => {\n        const component = route.component;\n        if (component) {\n          if (\n            component.displayName &&\n            component.displayName.toLowerCase().indexOf(\"connect\") > -1\n          ) {\n            let parentComponent = component.WrappedComponent;\n            if (parentComponent.prefetchActions) {\n              return parentComponent.prefetchActions(\n                location.pathname.substring(1)\n              );\n            } else if (\n              parentComponent.wrappedComponent &&\n              parentComponent.wrappedComponent().prefetchActions\n            ) {\n              return parentComponent\n                .wrappedComponent()\n                .prefetchActions(location.pathname.substring(1));\n            }\n          } else if (component.prefetchActions) {\n            return component.prefetchActions(location.pathname.substring(1));\n          }\n        }\n        return [];\n      });\n\n      const actions = results.reduce((flat, toFlatten) => {\n        return flat.concat(toFlatten);\n      }, []);\n\n      const promises = actions.map((initialAction) => {\n        return this.props.dispatch(initialAction());\n      });\n      Promise.all(promises);\n    }\n\n    componentDidMount() {\n      this.trackPageView();\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.fetchData(nextProps);\n      const navigated = nextProps.location !== this.props.location;\n\n      if (navigated) {\n        this.trackPageView();\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  };\n};\n\nexport default onRouteChange;\n//file chnge -> reload browser  fs event\n//open tab\n//listen to tab\n","import React from \"react\";\n\nconst Shoes = ({ someProp }) => (\n  <div>\n    <h3>Shoes</h3>\n    <div>{someProp}</div>\n  </div>\n);\n\nexport default Shoes;\n","import React from \"react\";\nimport { Switch, Link, Route } from \"react-router-dom\";\nimport { renderRoutes } from \"react-router-config\";\n\nconst Category = (props) => {\n  console.log(\"props\", props);\n  //   console.log(\"children\", children, route);\n  const { match } = props;\n  return (\n    <div>\n      <ul>\n        <li>\n          <Link to={`${match.url}/shoes`}>Shoes</Link>\n        </li>\n        <li>\n          <Link to={`${match.url}/boots`}>Boots</Link>\n        </li>\n        <li>\n          <Link to={`${match.url}/footwear`}>Footwear</Link>\n        </li>\n      </ul>\n\n      {renderRoutes(props.route.routes, {\n        someProp: \"these extra props are optional\",\n      })}\n    </div>\n  );\n};\n\nexport default Category;\n","import React, { Component } from \"react\";\nimport { increment, decrement } from \"../../shared/redux/actionCreators.js\";\nimport { connect } from \"react-redux\";\n\nclass Counter extends Component {\n  static prefetchActions() {\n    return [];\n  }\n\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const { dispatch, counter, decrement, increment } = this.props;\n    return (\n      <div>\n        counter: {counter}\n        <div>\n          <button onClick={() => increment()}>increment</button>\n          <button onClick={() => decrement()}>decrement</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return state;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    increment: () => dispatch(increment()),\n    decrement: () => dispatch(decrement()),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Counter);\n","import React, { useEffect } from \"react\";\n\nconst Home = (props) => {\n  useEffect(() => {\n    document.getElementsByTagName(\"title\")[0].innerHTMl =\n      Home.createTitle(props);\n  }, []);\n\n  useEffect(() => {\n    document.getElementsByTagName(\"title\")[0].innerHTMl =\n      Home.createTitle(props);\n  }, [props]);\n\n  return (\n    <div>\n      <p>Home!</p>\n    </div>\n  );\n};\n\nHome.createMetatags = (params) => {\n  const tags = [];\n\n  tags.push({\n    name: \"description\",\n    content: \"Home conent\",\n  });\n  tags.push({\n    property: \"og:description\",\n    content: \"Home description\",\n  });\n  tags.push({\n    property: \"og:title\",\n    content: \"Home title\",\n  });\n  tags.push({\n    property: \"og:url\",\n    content: `http://localhost:8000`,\n  });\n  tags.push({\n    property: \"og:image\",\n    content: \"Home image\",\n  });\n\n  return tags;\n};\n\nHome.createTitle = (props) => {\n  return `Home`;\n};\n\nexport default Home;\n","import React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { StaticRouter } from \"react-router-dom\";\nimport { matchRoutes, renderRoutes } from \"react-router-config\";\nimport { Provider } from \"react-redux\";\nimport routes from \"../../shared/sharedRoutes.js\";\nimport HTML from \"../../client/components/html\";\nimport initRedux from \"../../shared/redux/initRedux\";\n\nfunction flattenStaticFunction(matches, staticFuncName, store = {}, request) {\n  let results = matches.map(({ match, route }) => {\n    const component = route.component;\n    if (component) {\n      if (\n        component.displayName &&\n        component.displayName.toLowerCase().indexOf(\"connect\") > -1\n      ) {\n        let parentComponent = component.WrappedComponent;\n        if (parentComponent[staticFuncName]) {\n          return parentComponent[staticFuncName](\n            request.params[0],\n            store,\n            request\n          );\n        } else if (\n          parentComponent.wrappedComponent &&\n          parentComponent.wrappedComponent[staticFuncName]\n        ) {\n          return parentComponent.wrappedComponent[staticFuncName](\n            request.params[0],\n            store,\n            request\n          );\n        }\n      } else if (component[staticFuncName]) {\n        return component[staticFuncName](request.params[0], store, request);\n      }\n    }\n\n    return [];\n  });\n\n  results = results.reduce((flat, toFlatten) => {\n    return flat.concat(toFlatten);\n  }, []);\n  return results;\n}\n\nexport default function renderView(parameters) {\n  return function (req, res, next) {\n    const matches = matchRoutes(routes, req.path);\n    const context = {};\n\n    if (matches) {\n      const store = initRedux();\n\n      let actions = flattenStaticFunction(\n        matches,\n        \"prefetchActions\",\n        null,\n        req\n      );\n\n      actions = actions.reduce((flat, toFlatten) => {\n        return flat.concat(toFlatten);\n      }, []);\n\n      const promises = actions.map((initialAction) => {\n        return store.dispatch(initialAction());\n      });\n\n      Promise.all(promises).then(() => {\n        const serverState = store.getState();\n        const stringifiedServerState = JSON.stringify(serverState);\n\n        const seoTags = flattenStaticFunction(\n          matches,\n          \"createMetatags\",\n          serverState,\n          req\n        );\n\n        const title = flattenStaticFunction(\n          matches,\n          \"createTitle\",\n          serverState,\n          req\n        );\n\n        const app = renderToString(\n          <Provider store={store}>\n            <StaticRouter location={req.url} context={context}>\n              {renderRoutes(routes)}\n            </StaticRouter>\n          </Provider>\n        );\n\n        if (!context.url) {\n          const html = renderToString(\n            <HTML\n              title={title}\n              metatags={seoTags}\n              assets={parameters}\n              renderedToStringComponents={app}\n              serverState={stringifiedServerState}\n            />\n          );\n          // cache.set(req.url, `<!DOCTYPE html>${html}`);\n          return res.send(`<!DOCTYPE html>${html}`);\n        }\n      });\n    } else {\n      next();\n    }\n  };\n}\n","// import fetch from \"isomorphic-fetch\";\n\nexport const INCREMENT = \"INCREMENT\";\nexport const DECREMENT = \"DECREMENT\";\n\nexport function increment() {\n  return { type: \"INCREMENT\" };\n}\n\nexport function decrement() {\n  return { type: \"DECREMENT\" };\n}\n","import { INCREMENT, DECREMENT } from \"./actionCreators.js\";\n\nexport default function counterReducer(state = 0, action) {\n  switch (action.type) {\n    case INCREMENT:\n      return state + 1;\n\n    case DECREMENT:\n      return state - 1;\n    default:\n      return state;\n  }\n}\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport counterReducer from \"./counterReducer.js\";\nimport loggerMiddleware from \"redux-logger\";\nimport thunkMiddleware from \"redux-thunk\";\n\nexport default function (initialState = {}) {\n  const reducer = combineReducers({\n    counter: counterReducer,\n  });\n\n  let middleware = [loggerMiddleware, thunkMiddleware];\n\n  const store = createStore(\n    reducer,\n    initialState,\n    compose(applyMiddleware(...middleware))\n  );\n\n  return store;\n}\n","import App from \"../client/app\";\nimport Home from \"../client/pages/Home\";\nimport Category from \"../client/pages/Category\";\nimport Counter from \"../client/pages/Counter\";\nimport NoMatch from \"../client/components/noMatch\";\nimport Shoes from \"../client/components/shoes\";\n\nconst routes = [\n  {\n    component: App,\n    routes: [\n      {\n        path: \"/\",\n        exact: true,\n        component: Home,\n      },\n      {\n        path: \"/category\",\n        component: Category,\n        routes: [\n          {\n            path: \"/category/shoes\",\n            component: Shoes,\n          },\n        ],\n      },\n      {\n        path: \"/counter\",\n        exact: true,\n        component: Counter,\n      },\n      {\n        component: NoMatch,\n      },\n    ],\n  },\n];\n\n// if (process.env.NODE_ENV !== \"production\") {\n//   routes[0].routes.push({\n//     path: \"/dev-test\",\n//     component: Products,\n//   });\n// }\n\nexport default routes;\n","module.exports = require(\"express\");","module.exports = require(\"lodash/merge\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-config\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-logger\");","module.exports = require(\"redux-thunk\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import express from \"express\";\nimport renderViewMiddleware from \"./middleware/renderView\";\nconst setupConfiguration = require(\"../../configuration/setup\");\nconst PORT = setupConfiguration.webserver.port;\n\nexport default function server(parameters) {\n  const app = express();\n\n  app.use(\"/assets\", express.static(\"build/assets\"));\n\n  app.use(renderViewMiddleware(parameters));\n\n  app.listen(PORT, () => {\n    console.log(`App listening on port: ${PORT}`);\n  });\n}\n"],"names":["React","useEffect","Component","Link","renderRoutes","onRouteChange","connect","App","props","console","log","route","routes","history","PropTypes","HTML","metatagsArray","metatags","forEach","item","index","push","title","Object","keys","assets","chunks","styles","map","key","__html","renderedToStringComponents","serverState","javascript","propTypes","string","NoMatch","matchRoutes","WrappedComponent","nextProps","location","matches","pathname","results","match","component","displayName","toLowerCase","indexOf","parentComponent","prefetchActions","substring","wrappedComponent","actions","reduce","flat","toFlatten","concat","promises","initialAction","dispatch","Promise","all","trackPageView","fetchData","navigated","PureComponent","Shoes","someProp","Switch","Route","Category","url","increment","decrement","Counter","counter","mapStateToProps","state","mapDispatchToProps","Home","document","getElementsByTagName","innerHTMl","createTitle","createMetatags","params","tags","name","content","property","renderToString","StaticRouter","Provider","initRedux","flattenStaticFunction","staticFuncName","store","request","renderView","parameters","req","res","next","path","context","then","getState","stringifiedServerState","JSON","stringify","seoTags","app","html","send"],"sourceRoot":""}